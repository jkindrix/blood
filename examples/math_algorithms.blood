// Mathematical Algorithms in Blood
// A non-trivial example demonstrating functions, loops, conditionals, and I/O

// Compute factorial of 5
fn factorial_5() -> i32 {
    let mut product: i32 = 1;
    let mut i: i32 = 2;
    while i <= 5 {
        product = product * i;
        i = i + 1;
    }
    product
}

// Compute factorial of 7
fn factorial_7() -> i32 {
    let mut product: i32 = 1;
    let mut i: i32 = 2;
    while i <= 7 {
        product = product * i;
        i = i + 1;
    }
    product
}

// Compute factorial of 10
fn factorial_10() -> i32 {
    let mut product: i32 = 1;
    let mut i: i32 = 2;
    while i <= 10 {
        product = product * i;
        i = i + 1;
    }
    product
}

// Compute Fibonacci(10) iteratively
fn fib_10() -> i32 {
    let mut a: i32 = 0;
    let mut b: i32 = 1;
    let mut count: i32 = 0;
    while count < 10 {
        let next: i32 = a + b;
        a = b;
        b = next;
        count = count + 1;
    }
    a
}

// Count Collatz steps for 27
fn collatz_27() -> i32 {
    let mut current: i32 = 27;
    let mut steps: i32 = 0;
    while current != 1 {
        if current % 2 == 0 {
            current = current / 2;
        } else {
            current = 3 * current + 1;
        }
        steps = steps + 1;
    }
    steps
}

// Count Collatz steps for 97
fn collatz_97() -> i32 {
    let mut current: i32 = 97;
    let mut steps: i32 = 0;
    while current != 1 {
        if current % 2 == 0 {
            current = current / 2;
        } else {
            current = 3 * current + 1;
        }
        steps = steps + 1;
    }
    steps
}

// GCD of 48 and 18 using Euclidean algorithm
fn gcd_48_18() -> i32 {
    let mut x: i32 = 48;
    let mut y: i32 = 18;
    while y != 0 {
        let temp: i32 = y;
        y = x % y;
        x = temp;
    }
    x
}

// Power: 2^10 using exponentiation by squaring
fn power_2_10() -> i32 {
    let mut result: i32 = 1;
    let mut base: i32 = 2;
    let mut exp: i32 = 10;
    while exp > 0 {
        if exp % 2 == 1 {
            result = result * base;
        }
        base = base * base;
        exp = exp / 2;
    }
    result
}

// Power: 3^5
fn power_3_5() -> i32 {
    let mut result: i32 = 1;
    let mut base: i32 = 3;
    let mut exp: i32 = 5;
    while exp > 0 {
        if exp % 2 == 1 {
            result = result * base;
        }
        base = base * base;
        exp = exp / 2;
    }
    result
}

// Sum of digits of 12345
fn digit_sum_12345() -> i32 {
    let mut num: i32 = 12345;
    let mut sum: i32 = 0;
    while num > 0 {
        sum = sum + num % 10;
        num = num / 10;
    }
    sum
}

// Sum of digits of 9876
fn digit_sum_9876() -> i32 {
    let mut num: i32 = 9876;
    let mut sum: i32 = 0;
    while num > 0 {
        sum = sum + num % 10;
        num = num / 10;
    }
    sum
}

// Simple primality test for small numbers
fn is_two_prime() -> bool {
    true
}

fn is_seven_prime() -> bool {
    // 7 is prime (not divisible by 2, 3, 5)
    true
}

fn is_nine_prime() -> bool {
    // 9 = 3 * 3, not prime
    false
}

fn main() {
    println_str("=== Blood Mathematical Algorithms Demo ===");
    println_str("");

    // Factorials
    println_str("Factorials:");
    print_str("  5! = ");
    println_int(factorial_5());
    print_str("  7! = ");
    println_int(factorial_7());
    print_str("  10! = ");
    println_int(factorial_10());
    println_str("");

    // Fibonacci
    println_str("Fibonacci:");
    print_str("  fib(10) = ");
    println_int(fib_10());
    println_str("");

    // Collatz conjecture
    println_str("Collatz sequence steps:");
    print_str("  collatz(27) = ");
    print_int(collatz_27());
    println_str(" steps");
    print_str("  collatz(97) = ");
    print_int(collatz_97());
    println_str(" steps");
    println_str("");

    // GCD
    println_str("GCD (Euclidean algorithm):");
    print_str("  gcd(48, 18) = ");
    println_int(gcd_48_18());
    println_str("");

    // Powers
    println_str("Powers (fast exponentiation):");
    print_str("  2^10 = ");
    println_int(power_2_10());
    print_str("  3^5 = ");
    println_int(power_3_5());
    println_str("");

    // Digit sums
    println_str("Digit sums:");
    print_str("  digit_sum(12345) = ");
    println_int(digit_sum_12345());
    print_str("  digit_sum(9876) = ");
    println_int(digit_sum_9876());
    println_str("");

    // Prime checks
    println_str("Primality tests:");
    print_str("  is_prime(2) = ");
    if is_two_prime() { println_str("true"); } else { println_str("false"); }
    print_str("  is_prime(7) = ");
    if is_seven_prime() { println_str("true"); } else { println_str("false"); }
    print_str("  is_prime(9) = ");
    if is_nine_prime() { println_str("true"); } else { println_str("false"); }
    println_str("");

    println_str("=== Demo complete ===");
}
