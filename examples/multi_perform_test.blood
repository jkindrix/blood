// Test multiple perform operations in sequence

effect Counter {
    op inc() -> i32;
}

deep handler BasicCounter for Counter {
    let mut count: i32

    return(x) { x }

    op inc() {
        count = count + 1;
        resume(count)
    }
}

fn main() -> i32 {
    with BasicCounter { count: 0 } handle {
        let a = perform Counter.inc();  // returns 1
        let b = perform Counter.inc();  // returns 2
        let c = perform Counter.inc();  // returns 3
        a + b + c  // should return 6
    }
}
