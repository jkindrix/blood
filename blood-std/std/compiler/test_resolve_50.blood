// Blood Self-Hosted Compiler - Name Resolution Types
//
// This module defines the types for name resolution. The actual resolution
// algorithms are implemented in hir.blood which orchestrates the lowering.
//
// Note: Some methods are omitted due to blood-rust Vec<T> type inference
// limitations with struct field access. These will be added when the
// compiler supports this pattern.

mod common;
mod hir_def;

// ============================================================
// Resolution Errors
// ============================================================

/// Error codes for name resolution.
pub enum ResolveErrorCode {
    NotFound,
    Ambiguous,
    PrivateAccess,
    ImportNotFound,
    CircularImport,
    DuplicateDefinition,
    InvalidPath,
    ModuleNotFound,
}

/// A name resolution error.
pub struct ResolveError {
    pub name_sym: common::Symbol,
    pub span: common::Span,
    pub code: ResolveErrorCode,
}

impl ResolveError {
    pub fn new(name_sym: common::Symbol, span: common::Span, code: ResolveErrorCode) -> ResolveError {
        ResolveError { name_sym, span, code }
    }

    pub fn not_found(name_sym: common::Symbol, span: common::Span) -> ResolveError {
        ResolveError::new(name_sym, span, ResolveErrorCode::NotFound)
    }

    pub fn duplicate(name_sym: common::Symbol, span: common::Span) -> ResolveError {
        ResolveError::new(name_sym, span, ResolveErrorCode::DuplicateDefinition)
    }
}

// ============================================================
