// FileCheck test: string calling conventions
// Verifies that string_push_str receives ptr arguments (not { ptr, i64 })
// and that string_as_str returns { ptr, i64 } (not ptr).
// Run with:
//   ./first_gen build tests/check_codegen_str.blood -o /tmp/check_str.ll
//   FileCheck-14 --input-file=/tmp/check_str.ll tests/check_codegen_str.blood
//
// string_push_str declaration must take (ptr, ptr)
// CHECK: declare void @string_push_str(ptr, ptr)
//
// string_as_str declaration must return { ptr, i64 }
// CHECK: declare { ptr, i64 } @string_as_str(ptr)
fn main() -> i32 {
    let mut s = String::new();
    s.push_str("hello");
    let slice = s.as_str();
    println(slice);
    0
}
