//! Option type for the bootstrap stdlib.

module std.option;

/// Optional value type.
pub enum Option<T> {
    /// No value.
    None,
    /// Some value.
    Some(T),
}

impl<T> Option<T> {
    /// Returns true if the option is Some.
    pub fn is_some(&self) -> bool {
        match self {
            Option::Some(_) => true,
            Option::None => false,
        }
    }

    /// Returns true if the option is None.
    pub fn is_none(&self) -> bool {
        match self {
            Option::Some(_) => false,
            Option::None => true,
        }
    }

    /// Returns the contained value or a default.
    pub fn unwrap_or(self, default: T) -> T {
        match self {
            Option::Some(v) => v,
            Option::None => default,
        }
    }

    /// Maps an Option<T> to Option<U>.
    pub fn map<U, F: Fn(T) -> U>(self, f: F) -> Option<U> {
        match self {
            Option::Some(v) => Option::Some(f(v)),
            Option::None => Option::None,
        }
    }
}

impl<T: Clone> Clone for Option<T> {
    fn clone(&self) -> Option<T> {
        match self {
            Option::Some(v) => Option::Some(v.clone()),
            Option::None => Option::None,
        }
    }
}
