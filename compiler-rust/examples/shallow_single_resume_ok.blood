// Test: Shallow handler with single resume (should compile OK)

effect Choice {
    op choose(a: i32, b: i32) -> i32;
}

// CORRECT: Shallow handler with single resume
shallow handler SingleShot for Choice {
    return(x) { x }
    op choose(a, b) {
        // Only one resume - OK for shallow handler
        resume(a + b)
    }
}

fn main() -> i32 {
    with SingleShot {} handle {
        perform Choice.choose(10, 20)
    }
}
// Expected: 30 (10 + 20)
