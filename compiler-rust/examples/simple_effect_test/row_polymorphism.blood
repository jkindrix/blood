// Test: Effect row polymorphism syntax
// This tests the `{Emit<T> | E}` syntax for effect row polymorphism

effect Emit<T> {
    op emit(value: T) -> ();
}

// A function that can emit with additional effects via row polymorphism
// The row variable E allows passing through additional effects
fn emit_value<E>() / {Emit<i32> | E} {
    perform Emit.emit(42);
}

// A simple handler for Emit<i32>
handler EmitHandler for Emit<i32> {
    let last_value: i32 = 0;

    return(x) { x }

    op emit(value) {
        resume(());
    }
}

fn main() {
    // Call with handler - using correct syntax
    with EmitHandler { last_value: 0 } handle {
        emit_value();
    }
}
