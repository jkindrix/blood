// Test: stdlib math utilities
// EXPECT: 8
// EXPECT: 16
// EXPECT: 6
// EXPECT: 12
// EXPECT: 1
// EXPECT: 0
// EXPECT: 16
// EXPECT: 5
// EXPECT: 1
// EXPECT: -1
// EXPECT: 0
// EXPECT: 3
// EXPECT: 7
// EXPECT: 5
// EXPECT: 10
// EXPECT: 5
mod stdlib_math;

fn main() -> i32 {
    test_pow();
    test_gcd_lcm();
    test_power_of_two();
    test_log2();
    test_sign();
    test_min_max();
    test_clamp();
    0
}

fn test_pow() {
    // pow_i32: 2^3 = 8
    let r = stdlib_math::pow_i32(2, 3);
    print_int(r);
    print_str("\n");

    // pow_u32: 2^4 = 16
    let r2 = stdlib_math::pow_u32(2, 4);
    print_int(r2 as i32);
    print_str("\n");
}

fn test_gcd_lcm() {
    // gcd(12, 18) = 6
    let g = stdlib_math::gcd(12, 18);
    print_int(g);
    print_str("\n");

    // lcm(4, 6) = 12
    let l = stdlib_math::lcm(4, 6);
    print_int(l);
    print_str("\n");
}

fn test_power_of_two() {
    // is_power_of_two(8) = true
    if stdlib_math::is_power_of_two(8) {
        print_int(1);
    } else {
        print_int(0);
    }
    print_str("\n");

    // is_power_of_two(7) = false
    if stdlib_math::is_power_of_two(7) {
        print_int(1);
    } else {
        print_int(0);
    }
    print_str("\n");

    // next_power_of_two(10) = 16
    let np = stdlib_math::next_power_of_two(10);
    print_int(np as i32);
    print_str("\n");
}

fn test_log2() {
    // log2(32) = 5
    let l = stdlib_math::log2_u32(32);
    print_int(l as i32);
    print_str("\n");
}

fn test_sign() {
    // sign(42) = 1
    let s1 = stdlib_math::sign(42);
    print_int(s1);
    print_str("\n");

    // sign(-5) = -1
    let s2 = stdlib_math::sign(0 - 5);
    print_int(s2);
    print_str("\n");

    // sign(0) = 0
    let s3 = stdlib_math::sign(0);
    print_int(s3);
    print_str("\n");
}

fn test_min_max() {
    // min_u32(3, 7) = 3
    let m1 = stdlib_math::min_u32(3, 7);
    print_int(m1 as i32);
    print_str("\n");

    // max_u32(3, 7) = 7
    let m2 = stdlib_math::max_u32(3, 7);
    print_int(m2 as i32);
    print_str("\n");

    // min_usize(5, 10) = 5
    let m3 = stdlib_math::min_usize(5, 10);
    print_int(m3 as i32);
    print_str("\n");

    // max_usize(5, 10) = 10
    let m4 = stdlib_math::max_usize(5, 10);
    print_int(m4 as i32);
    print_str("\n");
}

fn test_clamp() {
    // clamp_u32(3, 5, 10) = 5 (clamped to lo)
    let c = stdlib_math::clamp_u32(3, 5, 10);
    print_int(c as i32);
    print_str("\n");
}
